---
/**
 * Landing page footer
 * Displays company info, contact details, and navigation links
 */
import LandingLogo from '../ui/LandingLogo.astro';
import { footerNavLinks } from '../../data/landing';
import { PHONE_PARTS, PHONE_COUNTRY, EXTERNAL_LINKS } from '../../utils/links';

interface Props {
  address: string;
  orgNumber: string;
}

const { address, orgNumber } = Astro.props;
const emailAddress = EXTERNAL_LINKS.email.replace('mailto:', '');
---

<footer class="py-10 px-6 border-t border-neutral-200 bg-neutral-50" role="contentinfo">
  <div class="max-w-6xl mx-auto">
    <div class="flex flex-col md:flex-row items-center justify-between gap-6 text-sm text-neutral-500">
      <div class="flex flex-col items-center md:items-start gap-3">
        <LandingLogo variant="muted" />
        <div class="text-xs text-neutral-600 text-center md:text-left space-y-0.5">
          <p>{address}</p>
          <p>Org.nr: {orgNumber}</p>
          <p class="pt-2">
            <a href={EXTERNAL_LINKS.email} class="text-neutral-600 hover:text-brand-navy transition-colors no-underline">{emailAddress}</a>
          </p>
          <p>
            <a
              id="phone-link"
              class="text-neutral-600 hover:text-brand-navy transition-colors no-underline"
              data-c={PHONE_COUNTRY}
              data-p={PHONE_PARTS.join(',')}
              aria-label="Ring oss"
            ></a>
          </p>
        </div>
      </div>

      <div class="flex flex-wrap justify-center md:justify-end items-center gap-4 md:gap-6">
        {footerNavLinks.map((link) => (
          <a
            href={link.href}
            class="hover:text-brand-navy transition-colors no-underline"
            {...('external' in link && link.external ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
          >
            {link.label}
          </a>
        ))}
      </div>
    </div>
  </div>
</footer>

<script>
  const el = document.getElementById('phone-link');
  if (el) {
    const c = el.dataset.c;
    const p = (el.dataset.p ?? '').split(',').join(' ');
    el.setAttribute('href', `tel:${c}${(el.dataset.p ?? '').split(',').join('')}`);
    el.textContent = `${c} ${p}`;
    el.removeAttribute('data-c');
    el.removeAttribute('data-p');
  }
</script>
