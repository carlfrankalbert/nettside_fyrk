---
import BaseLayout from '../layouts/BaseLayout.astro';
import FormField from '../components/FormField.astro';
import { EXTERNAL_LINKS, linkClasses } from '../utils/links';
---

<BaseLayout 
  title="Kontakt"
  description="Ta kontakt med Fyrk for å høre hvordan vi kan hjelpe ditt selskap med produktledelse som leverer resultater."
>
  <section class="py-24 bg-white dark:bg-neutral-900" aria-labelledby="contact-heading">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <h1 id="contact-heading" class="text-h1 mb-4">Kontakt oss</h1>
        <p class="text-lg text-neutral-700 dark:text-neutral-300 mb-12">
          Har du spørsmål eller vil du høre mer om hvordan vi kan hjelpe ditt selskap? Send oss en melding, så tar vi kontakt.
        </p>

        <form 
          class="space-y-6" 
          method="POST" 
          name="contact"
          netlify
          netlify-honeypot="bot-field"
          novalidate
          aria-label="Kontaktformular"
          id="contact-form"
        >
          <input type="hidden" name="form-name" value="contact" />
          <p class="hidden">
            <label>
              Don't fill this out if you're human: <input name="bot-field" />
            </label>
          </p>
          
          <div role="alert" id="form-error" class="hidden bg-feedback-error/10 border-2 border-feedback-error text-feedback-error p-4 rounded-lg mb-4" aria-live="assertive"></div>
          <div role="status" id="form-success" class="hidden bg-feedback-success/10 border-2 border-feedback-success text-feedback-success p-4 rounded-lg mb-4" aria-live="polite"></div>
          
          <FormField
            id="name"
            name="name"
            label="Navn"
            type="text"
            required={true}
            autocomplete="name"
            helpText="Skriv inn ditt fullstendige navn"
          />

          <FormField
            id="email"
            name="email"
            label="E-post"
            type="email"
            required={true}
            autocomplete="email"
            helpText="Skriv inn din e-postadresse"
          />

          <FormField
            id="company"
            name="company"
            label="Selskap"
            type="text"
            autocomplete="organization"
            helpText="Skriv inn navnet på ditt selskap (valgfritt)"
          />

          <FormField
            id="message"
            name="message"
            label="Melding"
            type="textarea"
            required={true}
            rows={6}
            helpText="Beskriv din henvendelse eller spørsmål"
          />

          <div class="flex items-start gap-3">
            <input
              type="checkbox"
              id="consent"
              name="consent"
              required
              class="mt-1 w-5 h-5 border-2 border-neutral-200 rounded text-brand-cyan focus:ring-2 focus:ring-brand-cyan focus:ring-offset-2"
              aria-required="true"
              aria-describedby="consent-error"
              aria-invalid="false"
            />
            <div class="flex-1">
              <label for="consent" class="text-sm text-neutral-700 dark:text-neutral-200 leading-relaxed">
                Jeg samtykker til at Fyrk kan lagre og behandle mine personopplysninger for å svare på henvendelsen. <span class="text-feedback-error" aria-label="påkrevd">*</span>
              </label>
              <span id="consent-error" class="text-feedback-error text-sm mt-1 hidden block" role="alert" aria-live="polite"></span>
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-full sm:w-auto text-lg px-8" aria-describedby="submit-help">
            Send melding
          </button>
          <span id="submit-help" class="sr-only">Send inn kontaktformularen</span>
        </form>

        <div class="mt-16 pt-12 border-t border-neutral-200 dark:border-neutral-700" aria-labelledby="other-contact-heading">
          <h2 id="other-contact-heading" class="text-h3 mb-6">Andre måter å nå oss på</h2>
          <div class="space-y-4">
            <div>
              <h3 class="font-primary font-semibold text-brand-navy dark:text-white mb-2">LinkedIn</h3>
              <a 
                href={EXTERNAL_LINKS.linkedin}
                target="_blank" 
                rel="noopener noreferrer"
                class={linkClasses.external}
                aria-label="Besøk Fyrk på LinkedIn (åpnes i ny fane)"
              >
                linkedin.com/company/fyrk
              </a>
            </div>
            <div>
              <h3 class="font-primary font-semibold text-brand-navy dark:text-white mb-2">Nettsted</h3>
              <a 
                href={EXTERNAL_LINKS.site}
                class={linkClasses.external}
                aria-label="Besøk Fyrk nettsted"
              >
                fyrk.no
              </a>
            </div>
            <div>
              <h3 class="font-primary font-semibold text-brand-navy dark:text-white mb-2">Lokasjon</h3>
              <p class="text-neutral-700 dark:text-neutral-200">Oslo, Norge</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  import { initContactForm } from '../scripts/contact-form';
  initContactForm();
</script>
