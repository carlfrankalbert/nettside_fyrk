---
/**
 * Terms of Service page
 * Uses same layout as landing page for consistency
 */
import '../styles/global.css';
import SEOHead from '../components/seo/SEOHead.astro';
import LandingHeader from '../components/landing/LandingHeader.astro';
import LandingFooter from '../components/landing/LandingFooter.astro';
import { footerContent } from '../data/landing';
import { vilkarContent, lastUpdated } from '../data/legal';

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const { seo, title, subtitle, sections } = vilkarContent;
---

<!doctype html>
<html lang="no" class="scroll-smooth">
  <head>
    <SEOHead
      title={seo.title}
      description={seo.description}
      type="website"
      canonicalUrl={canonicalURL}
    />
  </head>
  <body class="min-h-screen flex flex-col bg-neutral-50 text-neutral-700">
    <a href="#main-content" class="skip-link">Hopp til hovedinnhold</a>

    <LandingHeader navLinks={[]} />

    <main id="main-content" class="flex-1 pt-24 pb-8">
      <!-- Hero section for page title -->
      <section class="py-6 px-6">
        <div class="max-w-3xl mx-auto">
          <h1 class="text-3xl md:text-4xl font-semibold text-brand-navy mb-2">
            {title}
          </h1>
          <p class="text-lg text-neutral-600 mb-0">
            {subtitle}
          </p>
        </div>
      </section>

      <!-- Content section -->
      <section class="py-6 px-6">
        <div class="max-w-3xl mx-auto space-y-8">
          {sections.map((section) => {
            const isWarning = 'isWarning' in section && section.isWarning;
            const bulletColor = isWarning ? 'bg-feedback-warning' : 'bg-brand-cyan-darker';
            const textColor = isWarning ? 'text-neutral-700' : 'text-neutral-600';

            return (
              <div class:list={[isWarning && 'p-4 bg-feedback-warning/10 border border-feedback-warning/30 rounded-lg']}>
                <h2 class="text-xl font-semibold text-brand-navy mb-3">{section.heading}</h2>

                {'boldIntro' in section && section.boldIntro && (
                  <p class:list={[textColor, 'leading-relaxed mb-4']}>
                    <strong>{section.boldIntro}</strong>
                  </p>
                )}

                {'body' in section && section.body && (
                  <p class:list={[
                    textColor, 'leading-relaxed',
                    ('bullets' in section && section.bullets) || ('bodyAfter' in section && section.bodyAfter) || ('richBullets' in section && section.richBullets) ? 'mb-4' : 'mb-0',
                  ]}>
                    {section.body}
                  </p>
                )}

                {'bodyHtml' in section && section.bodyHtml && (
                  <p class:list={[textColor, 'leading-relaxed mb-0']} set:html={section.bodyHtml} />
                )}

                {'bodyAfter' in section && section.bodyAfter && (
                  <p class:list={[textColor, 'leading-relaxed mb-4']}>
                    {section.bodyAfter}
                  </p>
                )}

                {'bullets' in section && section.bullets && (
                  <ul class:list={['space-y-2', textColor]}>
                    {section.bullets.map((bullet: string) => (
                      <li class="flex items-start gap-3">
                        <span class:list={['w-1.5 h-1.5 rounded-full mt-2 shrink-0', bulletColor]}></span>
                        <span set:html={bullet} />
                      </li>
                    ))}
                  </ul>
                )}

                {'richBullets' in section && section.richBullets && (
                  <ul class:list={['space-y-2', textColor]}>
                    {section.richBullets.map((item) => (
                      <li class="flex items-start gap-3">
                        <span class:list={['w-1.5 h-1.5 rounded-full mt-2 shrink-0', bulletColor]}></span>
                        <span>
                          <Fragment set:html={item.html} />
                          {' '}
                          <a href={item.link.href} target="_blank" rel="noopener noreferrer" class="text-brand-cyan-darker hover:text-brand-navy underline underline-offset-2 transition-colors">
                            {item.link.label}
                          </a>
                        </span>
                      </li>
                    ))}
                  </ul>
                )}
              </div>
            );
          })}

          <div class="pt-6 border-t border-neutral-200">
            <p class="text-sm text-neutral-500 mb-0">
              Sist oppdatert: {lastUpdated}
            </p>
          </div>
        </div>
      </section>
    </main>

    <LandingFooter {...footerContent} />
  </body>
</html>
